-- Add your query below.
-- https://github.com/vmangos/core/commit/8581b971c3e3da9de993952ed7eb64f534234bb7

-- Correct waypoints for Rocklance.
-- 2022-10-25 23:33:16 WaypointMovementGenerator::LoadPath: Creature (Entry: 5841 Counter: 20720) DBGuid: 20720 doesn't have waypoint path 0
-- 2022-10-25 23:33:16 void WaypointMovementGenerator<Creature>::InitializeWaypointPath> unable to intialize path for Creature (Entry: 5841 Counter: 20720) DBGuid: 20720
UPDATE `creature` SET `position_x`=-1464.57, `position_y`=-2806.59, `position_z`=92.3649, `orientation`=0.672961, `MovementType` = 0 WHERE `guid`=20720;
UPDATE `creature` SET `position_x`=-1473.96, `position_y`=-2811.36, `position_z`=92.126, `orientation`=0.672911 WHERE `guid`=14007;
UPDATE `creature` SET `position_x`=-1471.32, `position_y`=-2814.68, `position_z`=92.1987, `orientation`=0.673215 WHERE `guid`=20588;
DELETE FROM `creature_linking` WHERE `master_guid` = 20720;

-- ============
-- SPAWN GROUPS
-- ============

SET @SGROUP := 19022; -- overwritten in 0521_winterfall_boss
DELETE FROM `spawn_group` WHERE `Id` = @SGROUP;
INSERT INTO `spawn_group` (`Id`, `Name`, `Type`, `MaxCount`, `WorldState`, `Flags`) VALUES
(@SGROUP, 'The Barrens - Rocklance (3)', 0, 0, 0, 0);

-- INSERT INTO `spawn_group_entry` (`Id`, `Entry`, `MinCount`, `MaxCount`, `Chance`) VALUES

-- https://youtu.be/dEqRKj04ots?t=248 Axe Left Behind, Lance Right Behind
DELETE FROM `spawn_group_spawn` WHERE `Id` = @SGROUP;
INSERT INTO `spawn_group_spawn` (`Id`, `Guid`, `SlotId`) VALUES
(@SGROUP, 20720, 0), -- Rocklance
(@SGROUP, 14007, 1), -- Kolkar Bloodcharger (Axe)
(@SGROUP, 20588, 2); -- Kolkar Marauder (Lance)

DELETE FROM `spawn_group_formation` WHERE `Id` = @SGROUP;
INSERT INTO `spawn_group_formation` (`Id`, `FormationType`, `FormationSpread`, `FormationOptions`, `PathId`, `MovementType`, `Comment`) VALUES
(@SGROUP, 3, 3, 0, @SGROUP, 2, 'The Barrens - Rocklance (3)');

DELETE FROM `waypoint_path_name` WHERE `PathId` = @SGROUP;
INSERT INTO `waypoint_path_name` (`PathId`, `Name`) VALUES
(@SGROUP,'The Barrens - Rocklance (3)');

DELETE FROM `creature_movement_template` WHERE `entry` = 5841; -- -29
DELETE FROM `waypoint_path` WHERE `PathId` = @SGROUP;
INSERT INTO `waypoint_path` (`PathId`, `Point`, `PositionX`, `PositionY`, `PositionZ`, `Orientation`, `WaitTime`) VALUES
(@SGROUP, 1, -1453.890381, -2798.286865, 92.050400, 100, 0),
(@SGROUP, 2, -1433.383057, -2792.407471, 92.799088, 100, 0),
(@SGROUP, 3, -1419.891602, -2780.094727, 93.320892, 100, 0),
(@SGROUP, 4, -1404.738037, -2775.254883, 92.158073, 100, 0),
(@SGROUP, 5, -1393.030884, -2769.111328, 91.824104, 100, 0),
(@SGROUP, 6, -1370.529053, -2759.992188, 93.129417, 100, 0),
(@SGROUP, 7, -1355.353638, -2754.309326, 94.287148, 100, 0),
(@SGROUP, 8, -1340.634521, -2747.532227, 95.524361, 100, 0),
(@SGROUP, 9, -1325.336182, -2741.690186, 95.264854, 100, 0),
(@SGROUP, 10, -1314.746216, -2739.725830, 94.869141, 100, 0),
(@SGROUP, 11, -1307.009521, -2741.357666, 94.087196, 100, 0),
(@SGROUP, 12, -1295.759277, -2748.552002, 93.203926, 100, 0),
(@SGROUP, 13, -1284.476807, -2756.328857, 92.731560, 100, 0),
(@SGROUP, 14, -1271.771851, -2770.254150, 92.664261, 100, 0),
(@SGROUP, 15, -1266.978027, -2785.688477, 93.028778, 100, 0),
(@SGROUP, 16, -1264.902344, -2798.755127, 93.863853, 100, 0),
(@SGROUP, 17, -1262.716309, -2812.100830, 94.264122, 100, 0),
(@SGROUP, 18, -1249.811646, -2833.143066, 93.835518, 100, 0),
(@SGROUP, 19, -1239.816162, -2836.459717, 94.526649, 100, 0),
(@SGROUP, 20, -1212.826294, -2836.709229, 94.366791, 100, 0),
(@SGROUP, 21, -1183.131592, -2834.155518, 94.634956, 100, 0),
(@SGROUP, 22, -1161.929077, -2829.941895, 93.505760, 100, 0),
(@SGROUP, 23, -1143.957397, -2824.344482, 94.303749, 100, 0),
(@SGROUP, 24, -1127.260742, -2821.063232, 95.138718, 100, 0),
(@SGROUP, 25, -1108.619507, -2822.599121, 94.756325, 100, 0),
(@SGROUP, 26, -1085.736084, -2829.923828, 91.916641, 100, 0),
(@SGROUP, 27, -1069.443115, -2843.858887, 91.791664, 100, 0),
(@SGROUP, 28, -1051.364014, -2855.515381, 91.791664, 100, 0),
(@SGROUP, 29, -1032.237671, -2865.594971, 91.791664, 100, 0),
(@SGROUP, 30, -1009.113953, -2873.090088, 91.791664, 100, 0),
(@SGROUP, 31, -987.420410, -2888.632080, 91.791664, 100, 0),
(@SGROUP, 32, -967.985474, -2903.323730, 91.791664, 100, 0),
(@SGROUP, 33, -953.705750, -2925.898438, 91.910439, 100, 0),
(@SGROUP, 34, -946.614075, -2946.194336, 93.676140, 100, 0),
(@SGROUP, 35, -956.215759, -2970.854248, 91.831383, 100, 0),
(@SGROUP, 36, -971.547791, -2993.036621, 92.852318, 100, 0),
(@SGROUP, 37, -1007.247253, -3017.071533, 93.077347, 100, 0),
(@SGROUP, 38, -1036.262207, -3036.786377, 92.638107, 100, 0),
(@SGROUP, 39, -1067.628418, -3070.314941, 93.466202, 100, 0),
(@SGROUP, 40, -1087.174316, -3089.007080, 94.934647, 100, 0),
(@SGROUP, 41, -1113.962402, -3111.782471, 94.223068, 100, 0),
(@SGROUP, 42, -1139.131592, -3127.426514, 94.644981, 100, 0),
(@SGROUP, 43, -1155.096313, -3127.270020, 93.621513, 100, 0),
(@SGROUP, 44, -1179.204224, -3124.328857, 94.603752, 100, 0),
(@SGROUP, 45, -1203.265625, -3120.603271, 95.496506, 100, 0),
(@SGROUP, 46, -1224.694824, -3109.167236, 95.390663, 100, 0),
(@SGROUP, 47, -1245.734131, -3104.877930, 93.473389, 100, 0),
(@SGROUP, 48, -1267.303711, -3094.097168, 93.471817, 100, 0),
(@SGROUP, 49, -1283.980225, -3085.126465, 93.954941, 100, 0),
(@SGROUP, 50, -1303.414551, -3076.138184, 91.010231, 100, 0),
(@SGROUP, 51, -1318.876099, -3076.290771, 92.943405, 100, 0),
(@SGROUP, 52, -1326.177612, -3073.872314, 93.026917, 100, 0),
(@SGROUP, 53, -1334.738525, -3067.298584, 92.589020, 100, 0),
(@SGROUP, 54, -1343.281738, -3060.654785, 92.818748, 100, 0),
(@SGROUP, 55, -1357.580566, -3052.972168, 92.522690, 100, 0),
(@SGROUP, 56, -1374.208862, -3044.473633, 94.784157, 100, 0),
(@SGROUP, 57, -1388.704468, -3037.485107, 93.287422, 100, 0),
(@SGROUP, 58, -1410.888062, -3027.472412, 91.919937, 100, 0),
(@SGROUP, 59, -1426.676392, -3022.621094, 92.041550, 100, 0),
(@SGROUP, 60, -1440.681763, -3014.561523, 93.281975, 100, 0),
(@SGROUP, 61, -1454.529663, -3006.118408, 93.666664, 100, 0),
(@SGROUP, 62, -1467.013428, -2995.954834, 92.154556, 100, 0),
(@SGROUP, 63, -1476.826416, -2983.190674, 91.797333, 100, 0),
(@SGROUP, 64, -1491.817383, -2963.644287, 93.020599, 100, 0),
(@SGROUP, 65, -1501.103027, -2943.945557, 94.434761, 100, 0),
(@SGROUP, 66, -1511.302979, -2922.086914, 93.758331, 100, 0),
(@SGROUP, 67, -1512.762573, -2900.741699, 92.630424, 100, 0),
(@SGROUP, 68, -1510.902710, -2881.936279, 93.263687, 100, 0),
(@SGROUP, 69, -1506.077026, -2863.743896, 95.147293, 100, 0),
(@SGROUP, 70, -1496.945557, -2844.199951, 94.579491, 100, 0),
(@SGROUP, 71, -1484.343506, -2823.448242, 93.024239, 100, 0),
(@SGROUP, 72, -1466.001099, -2807.723877, 92.335152, 100, 0);

-- Correct waypoints for Sister Rathtalon. (-57)
UPDATE `creature` SET `position_x`=460.697601, `position_y`=-1444.192993, `position_z`=91.791664, `orientation`=1.27938 WHERE `id`=5830;
DELETE FROM `creature_movement_template` WHERE `entry`=5830;
INSERT INTO `creature_movement_template` (`entry`, `point`, `positionx`, `positiony`, `positionz`, `orientation`, `waittime`) VALUES
(5830, 1, 465.713135, -1428.067871, 91.791664, 100, 0),
(5830, 2, 469.242371, -1417.333740, 91.791664, 100, 0),
(5830, 3, 478.677155, -1403.564819, 91.791664, 100, 0),
(5830, 4, 498.793762, -1383.923462, 91.791664, 100, 0),
(5830, 5, 525.773682, -1363.719116, 91.791664, 100, 0),
(5830, 6, 538.398254, -1352.591431, 91.791664, 100, 0),
(5830, 7, 558.407715, -1342.958252, 91.862625, 100, 0),
(5830, 8, 574.229736, -1337.211182, 92.907181, 100, 0),
(5830, 9, 588.528992, -1328.398315, 92.374031, 100, 0),
(5830, 10, 598.789978, -1324.084229, 91.791649, 100, 0),
(5830, 11, 620.453125, -1317.822998, 91.791649, 100, 0),
(5830, 12, 641.094116, -1308.877930, 91.791634, 100, 0),
(5830, 13, 662.557312, -1302.554688, 91.791634, 100, 0),
(5830, 14, 684.783081, -1302.536011, 92.017242, 100, 0),
(5830, 15, 711.769775, -1309.032227, 91.839653, 100, 0),
(5830, 16, 737.838867, -1319.767212, 92.655327, 100, 0),
(5830, 17, 747.804993, -1325.028320, 92.264870, 100, 0),
(5830, 18, 759.626648, -1342.394897, 91.728806, 100, 0),
(5830, 19, 759.170898, -1358.635864, 91.728806, 100, 0),
(5830, 20, 749.283691, -1371.915039, 91.774986, 100, 0),
(5830, 21, 729.836670, -1382.450562, 91.791634, 100, 0),
(5830, 22, 702.467102, -1382.854004, 91.791634, 100, 0),
(5830, 23, 689.534607, -1372.937500, 91.791634, 100, 0),
(5830, 24, 680.934875, -1365.723267, 91.791634, 100, 0),
(5830, 25, 671.685364, -1359.323364, 91.791634, 100, 0),
(5830, 26, 658.027283, -1349.359253, 91.791634, 100, 0),
(5830, 27, 639.407227, -1336.613281, 91.791634, 100, 0),
(5830, 28, 632.090576, -1328.375122, 91.791641, 100, 0),
(5830, 29, 626.191528, -1318.796387, 91.791649, 100, 0),
(5830, 30, 618.241455, -1303.924683, 91.791656, 100, 0),
(5830, 31, 608.705872, -1289.954224, 91.791664, 100, 0),
(5830, 32, 593.048706, -1273.816406, 92.027122, 100, 0),
(5830, 33, 580.056946, -1263.048706, 91.791634, 100, 0),
(5830, 34, 563.192627, -1257.170044, 92.010750, 100, 0),
(5830, 35, 552.012451, -1255.824341, 92.168709, 100, 0),
(5830, 36, 540.931213, -1254.411865, 91.837219, 100, 0),
(5830, 37, 531.054382, -1256.709717, 91.791634, 100, 0),
(5830, 38, 514.352356, -1279.212402, 91.791634, 100, 0),
(5830, 39, 510.393738, -1300.554077, 91.791634, 100, 0),
(5830, 40, 513.577698, -1316.914185, 91.791634, 100, 0),
(5830, 41, 519.968567, -1332.601685, 91.791656, 100, 0),
(5830, 42, 526.828979, -1341.168335, 91.791664, 100, 0),
(5830, 43, 551.459900, -1354.381714, 91.791664, 100, 0),
(5830, 44, 563.933960, -1365.278320, 91.791656, 100, 0),
(5830, 45, 572.808899, -1379.563232, 91.791649, 100, 0),
(5830, 46, 577.456177, -1395.622925, 92.922615, 100, 0),
(5830, 47, 583.428406, -1417.089844, 91.847206, 100, 0),
(5830, 48, 587.200195, -1433.551636, 91.791664, 100, 0),
(5830, 49, 581.505981, -1454.134766, 92.260269, 100, 0),
(5830, 50, 572.012207, -1467.969604, 92.801804, 100, 0),
(5830, 51, 557.541748, -1485.257446, 91.825127, 100, 0),
(5830, 52, 544.116455, -1495.333374, 92.391182, 100, 0),
(5830, 53, 522.156311, -1500.643311, 94.361984, 100, 0),
(5830, 54, 494.491211, -1496.822266, 94.322266, 100, 0),
(5830, 55, 477.172058, -1482.979126, 93.440079, 100, 0),
(5830, 56, 468.192780, -1468.933716, 91.820892, 100, 0),
(5830, 57, 461.437103, -1447.662720, 91.791664, 100, 0);

-- End of migration.

